<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ch√∫c m·ª´ng sinh nh·∫≠t</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to bottom, #ffe0f0, #c7ffff);
      overflow: hidden;
    }
    .login-box {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #eee;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
    }
    .login-box h2 {
      color: #e91e63;
    }
    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .keypad button {
      padding: 15px;
      background: pink;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
    }
    .hidden {
      display: none !important;
    }
    .birthday-screen {
      text-align: center;
      padding-top: 30px;
    }
    .birthday-screen h1 {
      font-size: 36px;
      color: #e91e63;
    }
    .birthday-screen p {
      font-size: 18px;
      margin: 10px;
    }
    /* Cake styles */
    .cake {
      margin: 40px auto 0 auto;
      width: 220px;
      height: 210px;
      position: relative;
      z-index: 10;
      transition: transform 1s cubic-bezier(0.77,0,0.175,1);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .cake.split-left {
      transform: translateX(-180px) rotate(-12deg) scale(0.92);
      transition: transform 1s cubic-bezier(0.77,0,0.175,1);
    }
    .cake.split-right {
      transform: translateX(180px) rotate(12deg) scale(0.92);
      transition: transform 1s cubic-bezier(0.77,0,0.175,1);
    }
    .cake-tiers {
      position: relative;
      width: 220px;
      height: 180px;
      z-index: 2;
      pointer-events: none;
    }
    .tier {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 4px 30px 0 #e91e6380, 0 2px 0 #fff8, 0 8px 12px 2px #ff8cb0;
    }
    .tier.bottom {
      width: 220px;
      height: 80px;
      top: 100px;
      background: linear-gradient(#ffe0f0 60%, #ff4da6 100%);
      border-radius: 0 0 120px 120px / 0 0 80px 80px;
      border-bottom: 8px solid #ff0080;
    }
    .tier.top {
      width: 150px;
      height: 60px;
      top: 40px;
      background: linear-gradient(#fff0fa 60%, #e91e63 100%);
      border-radius: 90px 90px 60px 60px / 60px 60px 40px 40px;
      border-bottom: 6px solid #e91e63;
    }
    .cake-plate {
      position: absolute;
      left: 50%;
      bottom: -18px;
      transform: translateX(-50%);
      width: 170px;
      height: 30px;
      background: radial-gradient(circle, #dedede 70%, #bbbbbb 100%);
      border-radius: 0 0 85px 85px / 0 0 30px 30px;
      z-index: 1;
      box-shadow: 0 6px 18px 3px #8888;
    }
    /* Candles */
    .candles {
      position: absolute;
      left: 50%;
      top: 18px;
      transform: translateX(-50%);
      width: 170px;
      height: 120px;
      pointer-events: none;
      z-index: 10;
    }
    .candle {
      position: absolute;
      width: 8px;
      height: 28px;
      background: repeating-linear-gradient(45deg, #fff 0 3px, #ff4da6 3px 6px);
      border-radius: 3px;
      box-shadow: 0 3px 7px 0 #ff008055;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .flame {
      width: 8px;
      height: 10px;
      margin-bottom: 1.5px;
      margin-left: -1px;
      border-radius: 60% 60% 50% 50%;
      background: radial-gradient(ellipse at center, #ffe066 60%, #ffaf40 90%, #ff0080 100%);
      filter: blur(0.5px);
      animation: flame-flicker 1s infinite alternate cubic-bezier(0.8,0.1,0.2,0.9);
    }
    @keyframes flame-flicker {
      0% { transform: scaleY(1) translateY(0);}
      80% { transform: scaleY(1.3) scaleX(1.05) translateY(-2px);}
      100% { transform: scaleY(1) scaleX(1) translateY(0);}
    }
    #surprise-btn {
      padding: 10px 20px;
      font-size: 18px;
      background: #ff4da6;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      margin-top: 30px;
      z-index: 20;
      position: relative;
    }
    .hearts-cluster {
      pointer-events: none;
      position: absolute;
      left: 50%;
      top: 50%;
      width: 420px;
      height: 400px;
      transform: translate(-50%, -58%);
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 30;
    }
    .hearts-cluster.show {
      opacity: 1;
      transition: opacity 0.8s;
    }
    .mini-heart {
      position: absolute;
      width: 22px;
      height: 22px;
      background: transparent;
      pointer-events: none;
      opacity: 0;
      animation: popIn 0.7s forwards;
    }
    .mini-heart svg {
      width: 100%;
      height: 100%;
      display: block;
    }
    @keyframes popIn {
      0% { transform: scale(0.1); opacity: 0; }
      70% { opacity: 1; transform: scale(1.15);}
      100% { opacity: 1; transform: scale(1);}
    }
    .big-name {
      position: absolute;
      left: 50%;
      top: 52%;
      transform: translate(-50%,-50%);
      font-size: 40px;
      font-weight: bold;
      color: #e91e63;
      letter-spacing: 3px;
      text-shadow: 0 4px 20px #fff,0 1px 1px #ff93b3,0 0px 30px #ff4da6;
      z-index: 50;
      opacity: 0;
      transition: opacity 0.6s;
      pointer-events: none;
      user-select: none;
    }
    .big-name.show {
      opacity: 1;
      transition: opacity 0.6s;
      animation: nameShow 1.1s;
    }
    @keyframes nameShow {
      from {opacity: 0; transform: translate(-50%,-60%) scale(0.7);}
      to {opacity: 1; transform: translate(-50%,-50%) scale(1);}
    }
    /* Plasma Heart */
    .plasma-heart-effect {
      position: absolute;
      left: 50%;
      top: 52%;
      transform: translate(-50%,-50%) scale(1.2);
      width: 320px;
      height: 320px;
      pointer-events: none;
      opacity: 0;
      z-index: 60;
      transition: opacity 1.1s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .plasma-heart-effect.show {
      opacity: 1;
      transition: opacity 1.1s;
      animation: plasmaIn 0.8s cubic-bezier(.36,2,.17,.89);
    }
    @keyframes plasmaIn {
      from { opacity: 0; transform: translate(-50%,-60%) scale(0.7);}
      to { opacity: 1; transform: translate(-50%,-50%) scale(1.2);}
    }
    /* Responsive */
    @media (max-width: 600px) {
      .cake, .cake-tiers { width: 160px !important;}
      .cake-plate { width: 120px !important;}
      .candles, .hearts-cluster, .plasma-heart-effect { width: 80vw !important; height: 70vw !important; min-width: 200px;}
    }
  </style>
</head>
<body>
<div class="login-box" id="login">
  <h2>Sinh Nh·∫≠t c·ªßa em üéÇ</h2>
  <input type="password" id="password" disabled placeholder="----">
  <div class="keypad">
    <button onclick="press('1')">1</button>
    <button onclick="press('2')">2</button>
    <button onclick="press('3')">3</button>
    <button onclick="press('4')">4</button>
    <button onclick="press('5')">5</button>
    <button onclick="press('6')">6</button>
    <button onclick="press('7')">7</button>
    <button onclick="press('8')">8</button>
    <button onclick="press('9')">9</button>
    <button onclick="clearInput()">X</button>
    <button onclick="press('0')">0</button>
    <button onclick="checkPassword()">‚úì</button>
  </div>
</div>

<div class="birthday-screen hidden" id="birthday">
  <h1>üéâ Ch√∫c m·ª´ng sinh nh·∫≠t! üéâ</h1>
  <p>Ch√∫c m·ª´ng sinh nh·∫≠t r·ª±c r·ª° t·ªõi con g√°i tuy·ªát v·ªùi nh·∫•t ƒë·ªùi anh!</p>
  <p>Anh mong em lu√¥n m·∫°nh kh·ªèe, lu√¥n r·∫°ng r·ª° v√† h·∫°nh ph√∫c.</p>
  <p>Anh s·∫Ω lu√¥n c·ªë g·∫Øng ƒë·ªÉ em lu√¥n nh·∫≠n nh·ªØng ƒëi·ªÅu ng·ªçt ng√†o nh·∫•t!</p>
  <div style="position:relative; height:260px; margin-bottom:0;">
    <div class="cake" id="cake">
      <div class="cake-tiers">
        <div class="tier top"></div>
        <div class="tier bottom"></div>
      </div>
      <div class="candles" id="candles"></div>
      <div class="cake-plate"></div>
    </div>
    <div class="hearts-cluster" id="heartsCluster"></div>
    <div class="big-name" id="bigName">Tr·∫ßn Anh Th∆∞</div>
    <div class="plasma-heart-effect" id="plasmaHeart">
      <!-- SVG plasma heart will be injected here -->
    </div>
  </div>
  <button id="surprise-btn" onclick="showSurprise()" style="z-index:30;">M√≥n qu√† b·∫•t ng·ªù</button>
</div>

<script>
  // LOGIN
  const correctPassword = "1107";
  let input = "";

  function press(num) {
    if (input.length < 6) {
      input += num;
      document.getElementById("password").value = input.replace(/./g, "*");
    }
  }

  function clearInput() {
    input = "";
    document.getElementById("password").value = "";
  }

  function checkPassword() {
    if (input === correctPassword) {
      document.getElementById("login").classList.add("hidden");
      document.getElementById("birthday").classList.remove("hidden");
      renderCandles();
    } else {
      alert("Sai m·∫≠t kh·∫©u!");
      clearInput();
    }
  }

  // CANDLES
  function renderCandles() {
    // Draw 16 candles evenly around the cake top edge
    const candleCount = 16;
    const radius = 66; // px, from cake center to candle base
    const centerX = 85; // px (candles div width/2)
    const centerY = 40; // px (candles div height/2)
    let html = '';
    for (let i = 0; i < candleCount; i++) {
      const angle = (i / candleCount) * Math.PI * 2;
      const x = centerX + Math.cos(angle) * radius - 4; // -4 to center candle
      const y = centerY + Math.sin(angle) * radius - 6; // -6 for base adjust
      html += `<div class="candle" style="left:${x}px; top:${y}px; z-index:10;">
        <div class="flame"></div>
      </div>`;
    }
    document.getElementById('candles').innerHTML = html;
  }

  // SURPRISE
  let surprisePlayed = false;
  function showSurprise() {
    if (surprisePlayed) return;
    surprisePlayed = true;

    // Split cake into left/right
    const cakeDiv = document.getElementById("cake");
    cakeDiv.style.zIndex = 22;
    cakeDiv.classList.add("split-left");
    setTimeout(() => {
      cakeDiv.classList.add("split-right");
    }, 80);

    // Hide candles (optional: let them stay for more effect)
    setTimeout(() => {
      document.getElementById('candles').style.opacity = 0.2;
    }, 250);

    // Show hearts after 700ms, animate in
    setTimeout(() => {
      showHeartsCluster();
    }, 700);

    // Show name in the middle of heart after 1.2s
    setTimeout(() => {
      const bigName = document.getElementById("bigName");
      bigName.classList.add("show");
    }, 1200);

    // After 3200ms, fadeout name, fadein plasma heart
    setTimeout(() => {
      document.getElementById("bigName").classList.remove("show");
      setTimeout(() => {
        showPlasmaHeart();
      }, 900);
    }, 3200);
  }

  // HEART CLUSTER (100 hearts in heart shape)
  function showHeartsCluster() {
    const cluster = document.getElementById("heartsCluster");
    cluster.innerHTML = '';
    const n = 100;
    const w = cluster.offsetWidth || 420;
    const h = cluster.offsetHeight || 400;
    // Heart parametric equation
    for (let i = 0; i < n; i++) {
      const t = Math.PI - (i / (n-1)) * 2 * Math.PI;
      // Heart shape: x = 16sin^3(t), y = 13cos(t)-5cos(2t)-2cos(3t)-cos(4t)
      const x = 16 * Math.pow(Math.sin(t), 3);
      const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
      // Normalize to fit cluster
      const px = w/2 + x * w/38;
      const py = h/2 - y * h/36;
      // Randomize slightly for cuteness and pop
      const rx = px + (Math.random()-0.5) * 8;
      const ry = py + (Math.random()-0.5) * 8;
      // Color gradation
      const color = `hsl(${330 - (i/1.25)},100%,${65+Math.random()*10}%)`;
      // Each heart pops in with a delay
      cluster.innerHTML += `<div class="mini-heart" style="left:${rx}px;top:${ry}px;animation-delay:${0.8+(i*0.01)}s;">
        <svg viewBox="0 0 32 29"><path d="M23.6,0c-3,0-5.6,2.2-7.6,6.1C13.9,2.2,11.3,0,8.4,0C3.7,0,0,3.8,0,8.5
        c0,9.1,14.6,19.8,15.2,20.2c0.2,0.2,0.5,0.3,0.8,0.3s0.6-0.1,0.8-0.3C17.4,28.3,32,17.6,32,8.5C32,3.8,28.3,0,23.6,0z"
        fill="${color}"></path></svg>
      </div>`;
    }
    cluster.classList.add('show');
  }

  // PLASMA HEART
  function showPlasmaHeart() {
    // Animate hearts & name fadeout, show plasma heart
    document.getElementById("heartsCluster").classList.remove("show");
    setTimeout(() => {
      document.getElementById("heartsCluster").innerHTML = "";
    }, 1300);
    // Show plasma heart
    const plasmaDiv = document.getElementById("plasmaHeart");
    plasmaDiv.innerHTML = `
      <svg width="320" height="320" viewBox="0 0 320 320">
        <defs>
          <radialGradient id="g1" cx="50%" cy="40%" r="60%">
            <stop offset="0%" stop-color="#fff6fa" stop-opacity="1" />
            <stop offset="60%" stop-color="#ff99e5" stop-opacity="0.9" />
            <stop offset="100%" stop-color="#ff0080" stop-opacity="0.2" />
          </radialGradient>
          <filter id="glow" x="-30%" y="-30%" width="160%" height="160%">
            <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <path
          d="M160 264
            Q50 180 80 110
            Q120 20 160 80
            Q200 20 240 110
            Q270 180 160 264
            Z"
          fill="url(#g1)"
          stroke="#fff"
          stroke-width="6"
          filter="url(#glow)">
          <animate attributeName="d" dur="3s" repeatCount="indefinite"
            values="
              M160 264 Q50 180 80 110 Q120 20 160 80 Q200 20 240 110 Q270 180 160 264 Z;
              M160 264 Q60 190 90 120 Q110 10 160 80 Q210 10 230 120 Q260 190 160 264 Z;
              M160 264 Q50 180 80 110 Q120 20 160 80 Q200 20 240 110 Q270 180 160 264 Z
            " />
        </path>
        <g>
          <ellipse cx="160" cy="120" rx="70" ry="22" fill="#fff0" filter="url(#glow)">
            <animate attributeName="rx" values="60;75;60" dur="2.7s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.27;0.6;0.27" dur="2.7s" repeatCount="indefinite"/>
          </ellipse>
          <ellipse cx="160" cy="170" rx="85" ry="15" fill="#ff70bb11" filter="url(#glow)">
            <animate attributeName="rx" values="80;95;80" dur="2.2s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.09;0.32;0.09" dur="2.2s" repeatCount="indefinite"/>
          </ellipse>
        </g>
      </svg>
    `;
    plasmaDiv.classList.add("show");
  }
</script>
</body>
</html>
